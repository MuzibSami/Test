jobs:
  my-job:
    runs-on: ubuntu-latest
    steps:
      - name: Replace default profile with custom profile
        run: |
          if [ "${{ github.event.inputs.environment }}" = "prod" ]; then
            profile_name="production"
          elif [ "${{ github.event.inputs.environment }}" = "dev" ]; then
            profile_name="development"
          fi
          sed -i "s/\[default\]/\[$profile_name\]/" ~/.aws/credentials
          cat ~/.aws/credentials # (optional) prints the content of the file for debugging purpose
          echo "Profile name changed to [$profile_name]"
        env:
          profile_name: ""
